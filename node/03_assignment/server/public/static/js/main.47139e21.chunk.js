(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(28),c=n.n(s),i=n(4),o=n(7),u=function(){return localStorage.getItem("token")},l=n(14),d=n(31),j=n(0),b=["component"],p=function(e){var t=e.component,n=Object(d.a)(e,b),a=u();return Object(j.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{render:function(e){return a?Object(j.jsx)(t,Object(l.a)({},e)):Object(j.jsx)(o.a,{to:"/signin"})}}))},m=n(2),h=n.n(m),x=n(3),f=n(5),O=n(6),v=n.n(O),g=r.a.createContext(),N=function(e){var t=e.children,n=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/users/me",{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("/api/users/me",{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(){var e=Object(x.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.patch("/api/users/me/password",{oldPassword:n,newPassword:a},{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(x.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r.user.email);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/service/users/email/".concat(n),{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i=function(){var e=Object(x.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return a=e.sent,r=a.data,e.abrupt("return",r.user.role);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o={getUser:n,deleteUser:a,changePassword:r,getUserEmail:s,getUserRole:i,getUserEmailById:c};return Object(j.jsxs)(g.Provider,{value:o,children:[" ",t]})},w=function(){return Object(a.useContext)(g)},y=function(){var e=Object(o.h)().pathname,t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(o.g)(),l=w().getUser,d=Object(a.useState)(""),b=Object(i.a)(d,2),p=b[0],m=b[1];Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(u());case 2:t=e.sent,n=t.data,m(n.user.role);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[l]),Object(a.useEffect)((function(){s(e)}),[e]);return Object(j.jsx)("div",{className:"bg-dark py-3 mb-4",children:p&&Object(j.jsxs)("nav",{className:"container navbar navbar-expand-md navbar-dark bg-dark d-flex justify-content-between",children:[Object(j.jsx)("h4",{className:"text-light fw-bold",children:"Speedy Truck"}),Object(j.jsxs)("ul",{className:"navbar-nav mb-2 mb-lg-0",children:[Object(j.jsx)("li",{className:"nav-item fs-5",children:Object(j.jsx)(f.b,{className:"nav-link ".concat("/"===r||r.includes("/profile")?"active":""),"aria-current":"page",to:"/",children:"Profile"})}),"DRIVER"===p&&Object(j.jsxs)("li",{className:"nav-item fs-5 dropdown",children:[Object(j.jsx)(f.b,{className:"nav-link  dropdown-toggle ".concat(r.includes("/trucks")?"active":""),to:"#",id:"dropdownMenuTrucks","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Trucks"}),Object(j.jsxs)("ul",{className:"dropdown-menu dropdown-menu-dark","aria-labelledby":"dropdownMenuTrucks",children:[Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{className:"dropdown-item",to:"/trucks/create",children:"Create truck"})}),Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{className:"dropdown-item",to:"/trucks/list",children:"Truck list"})})]})]}),Object(j.jsxs)("li",{className:"nav-item fs-5 dropdown",children:[Object(j.jsx)(f.b,{className:"nav-link dropdown-toggle ".concat(r.includes("/loads")?"active":""),to:"#",id:"dropdownMenuLoads","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Loads"}),Object(j.jsxs)("ul",{className:"dropdown-menu dropdown-menu-dark","aria-labelledby":"dropdownMenuLoads",children:["SHIPPER"===p&&Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{className:"dropdown-item",to:"/loads/create",children:"Create load"})}),Object(j.jsx)("li",{children:Object(j.jsx)(f.b,{className:"dropdown-item",to:"/loads/list",children:"Load list"})})]})]}),Object(j.jsx)("li",{className:"nav-item fs-5",children:Object(j.jsx)(f.b,{className:"nav-link",to:"#",onClick:function(){localStorage.removeItem("token"),c.push("/signin")},children:"Log Out"})})]})]})})},k=r.a.createContext(),S=function(e){var t=e.children,n={signup:function(){var e=Object(x.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/auth/register",{email:t,password:n,role:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),signin:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/auth/login",{email:t,password:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),forgotPassword:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/auth/forgot_password",{email:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};return Object(j.jsx)(k.Provider,{value:n,children:t})},_=function(){return Object(a.useContext)(k)},T=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(null),r=_().signup,s=Object(a.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1],l=Object(a.useState)(""),d=Object(i.a)(l,2),b=d[0],p=d[1],m=function(){var a=Object(x.a)(h.a.mark((function a(s){var c,i,o,l,d;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),c=e.current.value,i=t.current.value,o=n.current.value,a.prev=4,a.next=7,r(c,i,o);case 7:l=a.sent,d=l.data,u(d.message),p(""),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(4),p(a.t0.message),u("");case 17:case"end":return a.stop()}}),a,null,[[4,13]])})));return function(e){return a.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center sign_in_body",children:Object(j.jsxs)("div",{className:"container my-5 sign_in_container",children:[Object(j.jsx)("h2",{className:"text-center",children:"Sign up"}),Object(j.jsxs)("form",{className:"form my-5",onSubmit:m,children:[Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Email"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"usernameInput",ref:e,required:!0})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"passwordInput",ref:t,required:!0})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Role"}),Object(j.jsxs)("select",{className:"form-select","aria-label":"Default select example",ref:n,children:[Object(j.jsx)("option",{value:"DRIVER",children:"Driver"}),Object(j.jsx)("option",{value:"SHIPPER",children:"Shipper"})]})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",children:"Sign Up"}),o&&Object(j.jsxs)("div",{className:"text-small form-alert text-center text-success",children:[o," ",Object(j.jsx)("br",{})," Now go ",Object(j.jsx)("a",{href:"/signin",children:"here"})," to sign in"]}),b&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger",children:b})]}),Object(j.jsxs)("p",{className:"text-center",children:["Already have an acoount? ",Object(j.jsx)("a",{href:"/signin",children:"Sign in!"})]})]})})},P=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=_().signin,r=Object(a.useState)(""),s=Object(i.a)(r,2),c=s[0],u=s[1],l=Object(o.g)(),d=function(){var a=Object(x.a)(h.a.mark((function a(r){var s,c,i,o;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),s=e.current.value,c=t.current.value,a.prev=3,a.next=6,n(s,c);case 6:i=a.sent,o=i.data,d=o.jwt_token,localStorage.setItem("token",d),l.push("/"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(3),u("Wrong email or password");case 15:case"end":return a.stop()}var d}),a,null,[[3,12]])})));return function(e){return a.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center sign_in_body",children:Object(j.jsxs)("div",{className:"container my-5 sign_in_container",children:[Object(j.jsx)("h2",{className:"text-center",children:"Sign in"}),Object(j.jsxs)("form",{className:"mt-5 mb-3 form",onSubmit:d,children:[Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Email"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"usernameInput",ref:e,required:!0})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Password"}),Object(j.jsx)("input",{type:"password",className:"form-control",id:"passwordInput",ref:t,required:!0})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",children:"Sign In"}),c&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger",children:c})]}),Object(j.jsxs)("p",{className:"text-center",children:["Need an account? ",Object(j.jsx)(f.b,{to:"/signup",children:"Sign up"})]}),Object(j.jsx)("p",{className:"text-center",children:Object(j.jsx)(f.b,{to:"/forgotpassword",children:"Forgot your password?"})})]})})},C=function(){var e=Object(a.useRef)(null),t=_().forgotPassword,n=Object(a.useState)(""),r=Object(i.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),l=u[0],d=u[1],b=Object(a.useState)(!1),p=Object(i.a)(b,2),m=p[0],f=p[1],O=function(){var n=Object(x.a)(h.a.mark((function n(a){var r,s,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=e.current.value,f(!0),n.prev=3,n.next=6,t(r);case 6:s=n.sent,i=s.data,d(""),c(i.message),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(3),c(""),d("Wrong email or password"),f(!1);case 17:case"end":return n.stop()}}),n,null,[[3,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center sign_in_body",children:Object(j.jsxs)("div",{className:"container my-5 sign_in_container",children:[Object(j.jsx)("h2",{className:"text-center",children:"Restore you password"}),Object(j.jsxs)("form",{className:"mt-5 form",onSubmit:O,children:[Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Email"}),Object(j.jsx)("input",{type:"email",className:"form-control",id:"usernameInput",ref:e,required:!0})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",disabled:m,children:"Submit"}),s&&Object(j.jsxs)("div",{className:"text-small form-alert text-center text-success",children:[s," ",Object(j.jsx)("br",{})," Now go ",Object(j.jsx)("a",{href:"/signin",children:"here"})," to sign in"]}),l&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger",children:l})]}),Object(j.jsxs)("p",{className:"text-center mt-3",children:["Need an account? ",Object(j.jsx)("a",{href:"/signup",children:"Sign up"})]})]})})},E=function(e){return(e=new Date(e)).toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit",year:"numeric",month:"short",day:"numeric"})},R=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=w(),c=s.getUser,l=s.deleteUser,d=Object(a.useState)(""),b=Object(i.a)(d,2),p=b[0],m=b[1],O=Object(o.g)();Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(u());case 2:t=e.sent,n=t.data,r(n.user);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c]);var v=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l(u());case 3:localStorage.removeItem("token"),O.push("/signin"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m("Something went wrong. Please try again later.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:n&&Object(j.jsxs)("div",{className:"container mx-5",children:[Object(j.jsx)("h3",{className:"text-center fw-bold my-5",children:"Detailed Profile Info"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"User ID:"})," ",n._id]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Email:"})," ",n.email]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Role:"})," ",n.role]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created date:"})," ",E(n.created_date)]})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)(f.b,{className:"btn btn-outline-primary edit me-3",to:"/profile/changepassword",children:"Edit Password"}),Object(j.jsx)(f.b,{className:"btn btn-outline-danger",to:"#","data-bs-toggle":"modal","data-bs-target":"#exampleModal",children:"Delete Profile"})]}),Object(j.jsx)("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(j.jsx)("div",{className:"modal-dialog",children:Object(j.jsxs)("div",{className:"modal-content",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("h5",{className:"modal-title",id:"exampleModalLabel",children:"Profile deletion"}),Object(j.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(j.jsx)("div",{className:"modal-body",children:"Do you really want to delete your profile?"}),Object(j.jsxs)("div",{className:"modal-footer",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),Object(j.jsx)("button",{type:"button",className:"btn btn-danger delete","data-bs-dismiss":"modal",onClick:v,children:"Delete"})]})]})})}),p&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger mt-5",children:p})]})})},I=r.a.createContext(),D=function(e){var t=e.children,n={getLoads:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/loads",{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createLoad:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/loads",n,{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getActiveLoad:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/loads/active",{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),iterateToNextState:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.patch("/api/loads/active/state",{},{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLoadById:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/loads/".concat(n),{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),editLoad:function(){var e=Object(x.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("/api/loads/".concat(a),n,{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),deleteLoad:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("/api/loads/".concat(n),{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),postLoad:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/loads/".concat(n,"/post"),{},{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getShippingInfo:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/loads/".concat(n,"/shipping_info"),{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};return Object(j.jsx)(I.Provider,{value:n,children:t})},L=function(){return Object(a.useContext)(I)},A=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=L(),c=s.getActiveLoad,o=s.iterateToNextState,l=u(),d=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(l);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(l);case 2:t=e.sent,n=t.data,r(n.load);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,l]),Object(j.jsx)("div",{className:"mt-5",children:n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h3",{className:"text-center fw-bold mb-5",children:"Your active load"}),Object(j.jsxs)("div",{className:"d-flex justify-content-between mx-5 pb-5",children:[Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Name: "}),n.name]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created by: "}),n.created_by]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Driver: "}),n.assigned_to]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Status: "}),n.status]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"State: "}),n.state]}),Object(j.jsx)("button",{className:"btn btn-outline-primary",onClick:d,children:"Iterate to the next Load state"})]}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Pickup Address: "}),n.pickup_address]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Delivery Address: "}),n.delivery_address]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Payload: "}),n.payload]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Dimensions (W-H-L): "}),"".concat(n.dimensions.width,"-").concat(n.dimensions.height,"-").concat(n.dimensions.length)]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created date: "}),E(n.created_date)]})]})]})]}):Object(j.jsx)("h5",{className:"text-center fw-bold",children:"You currently have no active loads"})})},W=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=w().getUserRole,c=u();return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(c);case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,s]),Object(j.jsxs)("div",{className:"container profile_container",children:[Object(j.jsx)(R,{}),"DRIVER"===n&&Object(j.jsx)(A,{})]})},J=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(""),r=Object(i.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),d=l[0],b=l[1],p=w().changePassword,m=function(){var n=Object(x.a)(h.a.mark((function n(a){var r,s,i,o,l;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=e.current.value,s=t.current.value,i=u(),n.prev=4,n.next=7,p(i,r,s);case 7:o=n.sent,l=o.data,c(""),b(l.message),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(4),b(""),c("Someting went wrong. Please try again.");case 17:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"d-flex flex-column align-items-center justify-content-center change_password_form",children:Object(j.jsxs)("div",{className:"container mb-5 sign_in_container",children:[Object(j.jsx)("h2",{className:"text-center",children:"Change Password"}),Object(j.jsxs)("form",{className:"mt-5 mb-3 form",onSubmit:m,children:[Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Old password"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"oldPasswordInput",ref:e,required:!0})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"New password"}),Object(j.jsx)("input",{type:"text",className:"form-control",id:"newPasswordInput",ref:t,required:!0})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",children:"Change"}),d&&Object(j.jsxs)("div",{className:"text-small form-alert text-center text-success",children:[d," "]}),s&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger",children:s})]})]})})},z=r.a.createContext(),U=function(e){var t=e.children,n={getTrucks:function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/trucks",{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createTruck:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/trucks",{type:n},{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getTruckById:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/trucks/".concat(n),{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),editTruck:function(){var e=Object(x.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("/api/trucks/".concat(a),{type:n},{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),deleteTruck:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("/api/trucks/".concat(n),{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assignTruck:function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/trucks/".concat(n,"/assign"),{},{headers:{Authorization:"JWT ".concat(t)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()};return Object(j.jsx)(z.Provider,{value:n,children:t})},q=function(){return Object(a.useContext)(z)},H=function(e){var t=e.title,n=e.truckRef,a=e.handleSubmit,r=e.success,s=e.error,c=e.type;return Object(j.jsx)("div",{className:"my-5 d-flex flex-column align-items-center justify-content-center",children:Object(j.jsxs)("div",{className:"container my-5 sign_in_container",children:[Object(j.jsx)("h2",{className:"text-center fw-bold",children:t}),c&&Object(j.jsxs)("p",{className:"text-center fs-5 mt-5",children:["Current type is ",Object(j.jsx)("span",{className:"text-primary",children:c})]}),Object(j.jsxs)("form",{className:"mt-5 form",onSubmit:a,children:[Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Type"}),Object(j.jsxs)("select",{className:"form-select",ref:n,children:[Object(j.jsx)("option",{value:"SPRINTER",children:"Sprinter"}),Object(j.jsx)("option",{value:"SMALL STRAIGHT",children:"Small Straight"}),Object(j.jsx)("option",{value:"LARGE STRAIGHT",children:"Large Straight"})]})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",children:c?"Update":"Create"}),r&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-success",children:r}),s&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger",children:s})]})]})})},M=function(){var e=Object(a.useRef)(null),t=q().createTruck,n=Object(a.useState)(""),r=Object(i.a)(n,2),s=r[0],c=r[1],o=Object(a.useState)(""),l=Object(i.a)(o,2),d=l[0],b=l[1],p=function(){var n=Object(x.a)(h.a.mark((function n(a){var r,s,i,o;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=e.current.value,s=u(),n.prev=3,n.next=6,t(s,r);case 6:i=n.sent,o=i.data,b(""),c(o.message),setTimeout((function(){c("")}),800),n.next=17;break;case 13:n.prev=13,n.t0=n.catch(3),c(""),b(n.t0.message);case 17:case"end":return n.stop()}}),n,null,[[3,13]])})));return function(e){return n.apply(this,arguments)}}();return Object(j.jsx)(H,{title:"Create a new truck",truckRef:e,handleSubmit:p,error:d,success:s})},B=function(){var e=Object(a.useRef)(null),t=q(),n=t.editTruck,r=t.getTruckById,s=Object(a.useState)(""),c=Object(i.a)(s,2),l=c[0],d=c[1],b=Object(a.useState)(""),p=Object(i.a)(b,2),m=p[0],f=p[1],O=Object(a.useState)(""),v=Object(i.a)(O,2),g=v[0],N=v[1],w=Object(o.i)().id,y=function(){var t=Object(x.a)(h.a.mark((function t(a){var r,s,c,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=e.current.value,s=u(),t.prev=3,t.next=6,n(s,r,w);case 6:c=t.sent,i=c.data,f(""),d(i.message+" Refresh to see changes."),setTimeout((function(){d("")}),800),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),d(""),f(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u(),e.next=3,r(t,w);case 3:n=e.sent,a=n.data,N(a.truck.type);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r,w]),Object(j.jsx)(H,{title:"Edit type of the truck",truckRef:e,handleSubmit:y,error:m,success:l,type:g})},V=function(){var e=q(),t=e.getTrucks,n=e.deleteTruck,r=e.assignTruck,s=w().getUserEmail,c=Object(a.useState)([]),o=Object(i.a)(c,2),l=o[0],d=o[1],b=Object(a.useState)(""),p=Object(i.a)(b,2),m=p[0],O=p[1],v=Object(a.useState)(""),g=Object(i.a)(v,2),N=g[0],y=g[1],k=Object(a.useState)(""),S=Object(i.a)(k,2),_=S[0],T=S[1],P=u(),C=function(){var e=Object(x.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(P,t);case 3:a=e.sent,r=a.data,T(""),y(r.message),setTimeout((function(){y(""),window.location.reload()}),500),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),y(""),T("Something went wrong, please try again."),setTimeout((function(){T("")}),500);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(P,t);case 3:n=e.sent,a=n.data,T(""),y(a.message),setTimeout((function(){y(""),window.location.reload()}),500),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),y(""),T("You already have an assigned truck."),setTimeout((function(){T("")}),500);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(P);case 2:return n=e.sent,a=n.data,d(a.trucks),e.next=7,s(P);case 7:r=e.sent,O(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,s,P]),Object(j.jsx)("div",{className:"container",children:l.length>0&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{className:"text-center my-4 fw-bold",children:"The list of trucks"}),N&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-success my-3",children:N}),_&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger my-3",children:_}),Object(j.jsxs)("table",{className:"table table-hover",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:["#","Created by","Assigned to","Type","Status","Created date","Assign","Edit","Delete"].map((function(e,t){return Object(j.jsx)("th",{children:e},t)}))})}),Object(j.jsx)("tbody",{children:l.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:t+1}),Object(j.jsx)("td",{children:m}),Object(j.jsx)("td",{children:null===e.assigned_to?"None":m}),Object(j.jsx)("td",{children:e.type}),Object(j.jsx)("td",{children:e.status}),Object(j.jsx)("td",{children:E(e.created_date)}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{className:"btn btn-outline-dark ".concat(e.assigned_to?"active":""),onClick:function(){return R(e._id)},children:Object(j.jsx)("i",{className:"bi bi-truck"})})}),Object(j.jsx)("td",{children:Object(j.jsx)(f.b,{className:"btn btn-outline-dark ".concat(e.assigned_to?"disabled":""),to:"/trucks/edit/".concat(e._id),children:Object(j.jsx)("i",{className:"bi bi-pencil"})})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){return C(e._id)},disabled:!!e.assigned_to,children:Object(j.jsx)("i",{className:"bi bi-trash"})})})]},t)}))})]})]})})},F=function(e){var t=e.title,n=e.handleSubmit,a=e.success,r=e.error,s=e.name,c=e.setName,i=e.payload,o=e.setPayload,u=e.pickup,l=e.setPickup,d=e.delivery,b=e.setDelivery,p=e.width,m=e.setWidth,h=e.height,x=e.setHeight,f=e.length,O=e.setLength,v=e.isEdit;return Object(j.jsx)("div",{className:"my-5 d-flex flex-column align-items-center justify-content-center",children:Object(j.jsxs)("div",{className:"container my-3 sign_in_container",children:[Object(j.jsx)("h2",{className:"text-center fw-bold",children:t}),Object(j.jsxs)("form",{className:"mt-5 form",onSubmit:n,children:[Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Name"}),Object(j.jsx)("input",{type:"text",className:"form-control",required:!0,value:s,onChange:function(e){return c(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Payload"}),Object(j.jsx)("input",{type:"number",className:"form-control",required:!0,value:i,onChange:function(e){return o(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Pickup address"}),Object(j.jsx)("input",{type:"text",className:"form-control",required:!0,value:u,onChange:function(e){return l(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Delivery address"}),Object(j.jsx)("input",{type:"text",className:"form-control",required:!0,value:d,onChange:function(e){return b(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Width"}),Object(j.jsx)("input",{type:"number",className:"form-control",required:!0,value:p,onChange:function(e){return m(Number(e.target.value))}})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Height"}),Object(j.jsx)("input",{type:"number",className:"form-control",required:!0,value:h,onChange:function(e){return x(e.target.value)}})]}),Object(j.jsxs)("div",{className:"mb-3 input-group",children:[Object(j.jsx)("span",{className:"input-group-text",id:"addon",children:"Length"}),Object(j.jsx)("input",{type:"number",className:"form-control",required:!0,value:f,onChange:function(e){return O(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",className:"btn btn-primary mb-3",children:v?"Change":"Create"}),a&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-success",children:a}),r&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger",children:r})]})]})})},Y=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(i.a)(s,2),o=c[0],l=c[1],d=Object(a.useState)(""),b=Object(i.a)(d,2),p=b[0],m=b[1],f=Object(a.useState)(""),O=Object(i.a)(f,2),v=O[0],g=O[1],N=Object(a.useState)(""),w=Object(i.a)(N,2),y=w[0],k=w[1],S=Object(a.useState)(""),_=Object(i.a)(S,2),T=_[0],P=_[1],C=Object(a.useState)(""),E=Object(i.a)(C,2),R=E[0],I=E[1],D=Object(a.useState)(""),A=Object(i.a)(D,2),W=A[0],J=A[1],z=Object(a.useState)(""),U=Object(i.a)(z,2),q=U[0],H=U[1],M=L().createLoad,B=function(){var e=Object(x.a)(h.a.mark((function e(t){var a,s,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=u(),s={name:n,payload:o,pickup_address:p,delivery_address:v,dimensions:{width:y,length:R,height:T}},e.prev=3,e.next=6,M(a,s);case 6:c=e.sent,i=c.data,J(""),H(i.message),r(""),l(""),m(""),g(""),k(""),P(""),I(""),setTimeout((function(){H("")}),800),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),H(""),J(e.t0.message);case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(F,{title:"Create a new load",handleSubmit:B,error:W,success:q,name:n,setName:r,payload:o,setPayload:l,pickup:p,setPickup:m,delivery:v,setDelivery:g,width:y,setWidth:k,height:T,setHeight:P,length:R,setLength:I,isEdit:!1})},G=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(0),c=Object(i.a)(s,2),l=c[0],d=c[1],b=Object(a.useState)(""),p=Object(i.a)(b,2),m=p[0],f=p[1],O=Object(a.useState)(""),v=Object(i.a)(O,2),g=v[0],N=v[1],w=Object(a.useState)(0),y=Object(i.a)(w,2),k=y[0],S=y[1],_=Object(a.useState)(0),T=Object(i.a)(_,2),P=T[0],C=T[1],E=Object(a.useState)(0),R=Object(i.a)(E,2),I=R[0],D=R[1],A=Object(a.useState)(""),W=Object(i.a)(A,2),J=W[0],z=W[1],U=Object(a.useState)(""),q=Object(i.a)(U,2),H=q[0],M=q[1],B=L(),V=B.getLoadById,Y=B.editLoad,G=Object(o.i)().id,K=u(),Q=function(){var e=Object(x.a)(h.a.mark((function e(t){var a,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={name:n,payload:l,pickup_address:m,delivery_address:g,dimensions:{width:k,length:I,height:P}},e.prev=2,e.next=5,Y(K,a,G);case 5:r=e.sent,s=r.data,z(""),M(s.message),setTimeout((function(){M("")}),800),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),M(""),z(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,a,s,c,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(K,G);case 2:t=e.sent,n=t.data,a=n.load,s=a.name,c=a.payload,i=a.pickup_address,o=a.delivery_address,r(s),d(c),f(i),N(o),S(n.load.dimensions.width),C(n.load.dimensions.height),D(n.load.dimensions.length);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[V,G,K]);return Object(j.jsx)(F,{title:"Edit the load",handleSubmit:Q,error:J,success:H,name:n,setName:r,payload:l,setPayload:d,pickup:m,setPickup:f,delivery:g,setDelivery:N,width:k,setWidth:S,height:P,setHeight:C,length:I,setLength:D,isEdit:!0})},K=n(19),Q=["#","Name","Creator","Driver","Status","State","Pickup Address","Delivery Address","Payload","Dimensions (W-H-L)","Created date","View","Post","Edit","Delete"],X=function(){var e=L(),t=e.getLoads,n=e.deleteLoad,r=e.postLoad,s=w(),c=s.getUserEmailById,o=s.getUserRole,l=Object(a.useState)([]),d=Object(i.a)(l,2),b=d[0],p=d[1],m=Object(a.useState)([]),O=Object(i.a)(m,2),v=O[0],g=O[1],N=Object(a.useState)([]),y=Object(i.a)(N,2),k=y[0],S=y[1],_=Object(a.useState)(""),T=Object(i.a)(_,2),P=T[0],C=T[1],R=Object(a.useState)(""),I=Object(i.a)(R,2),D=I[0],A=I[1],W=Object(a.useState)(""),J=Object(i.a)(W,2),z=J[0],U=J[1],q=u(),H=function(){var e=Object(x.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(q,t);case 3:a=e.sent,r=a.data,U(""),A(r.message),setTimeout((function(){A(""),window.location.reload()}),500),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),A(""),U("Something went wrong, please try again."),setTimeout((function(){U("")}),1e3);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(q,t);case 3:n=e.sent,(a=n.data).driver_found?(U(""),A(a.message),setTimeout((function(){A(""),window.location.reload()}),800)):(A(""),U(a.message),setTimeout((function(){U("")}),1e3)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),A(""),U(e.t0.message),setTimeout((function(){U("")}),1e3);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(q);case 2:return n=e.sent,a=n.data,p(a.loads),a.loads.forEach(function(){var e=Object(x.a)(h.a.mark((function e(t){var n,a,r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(q,t.created_by);case 2:return a=e.sent,r=a.data.userEmail,g((function(e){return[].concat(Object(K.a)(e),[r])})),e.next=7,c(q,null!==(n=t.assigned_to)&&void 0!==n?n:0);case 7:s=e.sent,i=s.data.userEmail,S((function(e){return[].concat(Object(K.a)(e),[i])}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,o(q);case 8:r=e.sent,C(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t,q,o,c]),Object(j.jsx)("div",{className:"container-fluid px-5",children:b.length>0&&v.length>0?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{className:"text-center my-4 fw-bold",children:"The list of loads"}),D&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-success my-3",children:D}),z&&Object(j.jsx)("div",{className:"text-small form-alert text-center text-danger my-3",children:z}),Object(j.jsx)("div",{className:"table-responsive",children:Object(j.jsxs)("table",{className:"table table-hover load_table",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{children:Q.map((function(e,t){return Object(j.jsx)("th",{scope:"col",children:e},t)}))})}),Object(j.jsx)("tbody",{children:b.map((function(e,t){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"row",children:t+1}),Object(j.jsx)("td",{children:e.name}),Object(j.jsx)("td",{children:v[0]}),"SHIPPER"===P?Object(j.jsx)("td",{children:null===k[t]?"None":k[t]}):Object(j.jsx)("td",{children:"You"}),Object(j.jsx)("td",{children:e.status}),Object(j.jsx)("td",{children:e.state}),Object(j.jsx)("td",{children:e.pickup_address}),Object(j.jsx)("td",{children:e.delivery_address}),Object(j.jsx)("td",{children:e.payload}),Object(j.jsx)("td",{children:"".concat(e.dimensions.width,"-").concat(e.dimensions.height,"-").concat(e.dimensions.length)}),Object(j.jsx)("td",{children:E(e.created_date)}),Object(j.jsx)("td",{children:Object(j.jsx)(f.b,{to:"/loads/".concat(e._id,"/shipping_info"),className:"btn btn-outline-dark ".concat("DRIVER"===P?"disabled":""),children:Object(j.jsx)("i",{className:"bi bi-eye"})})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{className:"btn btn-outline-dark ".concat(e.assigned_to?"active":""),onClick:function(){return M(e._id)},disabled:"DRIVER"===P,children:Object(j.jsx)("i",{className:"bi bi-truck"})})}),Object(j.jsx)("td",{children:Object(j.jsx)(f.b,{className:"btn btn-outline-dark ".concat(e.assigned_to||"DRIVER"===P?"disabled":""),to:"/loads/edit/".concat(e._id),children:Object(j.jsx)("i",{className:"bi bi-pencil"})})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{className:"btn btn-outline-dark",onClick:function(){return H(e._id)},disabled:!(!e.assigned_to&&"DRIVER"!==P),children:Object(j.jsx)("i",{className:"bi bi-trash"})})})]},t)}))})]})})]}):""})},Z=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(i.a)(s,2),l=c[0],d=c[1],b=Object(a.useState)(""),p=Object(i.a)(b,2),m=p[0],f=p[1],O=w().getUserRole,v=L(),g=v.getShippingInfo,N=v.getLoadById,y=u(),k=Object(o.i)().id;return Object(a.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(y,k);case 2:return t=e.sent,n=t.data,r(n.load),e.next=7,O(y);case 7:if(a=e.sent,f(a),"SHIPPER"!==a){e.next=14;break}return e.next=12,g(y,k);case 12:s=e.sent,d(s.data.truck);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[g,y,k,N,O]),Object(j.jsx)("div",{className:"container",children:n&&Object(j.jsxs)("div",{className:"loadlist_container",children:[Object(j.jsx)("h3",{className:"text-center fw-bold my-3",children:"Shipping Info"}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Name: "}),n.name]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created by: "}),n.created_by]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Driver: "}),n.assigned_to]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Status: "}),n.status]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"State: "}),n.state]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Pickup Address: "}),n.pickup_address]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Delivery Address: "}),n.delivery_address]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Payload: "}),n.payload]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Dimensions (W-H-L): "}),"".concat(n.dimensions.width,"-").concat(n.dimensions.height,"-").concat(n.dimensions.length)]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created date: "}),E(n.created_date)]}),"SHIPPER"===m&&Object(j.jsxs)("div",{className:"logs",children:[Object(j.jsx)("h3",{className:"text-center fw-bold my-3",children:"Logs"}),n.logs.map((function(e,t){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Message: "})," ",e.message]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created date: "}),E(e.time)]}),Object(j.jsx)("hr",{})]},t)}))]}),l&&Object(j.jsxs)("div",{className:"truck",children:[Object(j.jsx)("h3",{className:"text-center fw-bold my-3",children:"Truck"}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created by: "}),l.created_by]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Assigned to: "}),l.assigned_to]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Type: "}),l.type]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Status: "}),l.status]}),Object(j.jsxs)("p",{className:"fs-5",children:[Object(j.jsx)("span",{className:"fw-bold",children:"Created date: "}),E(l.created_date)]})]})]})})},$=(n(64),function(){var e=Object(o.h)().pathname,t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],s=n[1];return Object(a.useEffect)((function(){u()?s(!0):s(!1)}),[e]),Object(j.jsxs)("div",{className:"app",children:[r&&Object(j.jsx)(y,{}),Object(j.jsxs)(o.d,{children:[Object(j.jsx)(o.b,{path:"/signup",component:T}),Object(j.jsx)(o.b,{path:"/signin",component:P}),Object(j.jsx)(o.b,{path:"/forgotpassword",component:C}),Object(j.jsx)(p,{path:"/profile/changepassword",component:J}),Object(j.jsx)(p,{path:"/trucks/create",component:M}),Object(j.jsx)(p,{path:"/trucks/edit/:id",component:B}),Object(j.jsx)(p,{path:"/trucks/list",component:V}),Object(j.jsx)(p,{path:"/loads/create",component:Y}),Object(j.jsx)(p,{path:"/loads/list",component:X}),Object(j.jsx)(p,{path:"/loads/edit/:id",component:G}),Object(j.jsx)(p,{path:"/loads/:id/shipping_info",component:Z}),Object(j.jsx)(p,{exact:!0,path:"/",component:W})]})]})});c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(S,{children:Object(j.jsx)(N,{children:Object(j.jsx)(U,{children:Object(j.jsx)(D,{children:Object(j.jsx)(f.a,{children:Object(j.jsx)($,{})})})})})})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.47139e21.chunk.js.map